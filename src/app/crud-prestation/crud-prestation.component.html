<div class="card">
  <div class="header-container">
    <h1 class="p-text-left">Liste des préstations</h1>
    <p-button icon="pi pi-plus" (click)="showDialog()" severity="warn" />
  </div>
  <p-table [value]="items" [tableStyle]="{ 'min-width': '50rem' }">
    <ng-template pTemplate="header">
      <tr>
        <th class="center-align">Intitule</th>
        <th class="center-align">Prix</th>
        <th class="center-align">Action</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-item>
      <tr>
        <td class="center-align">{{ item.intitule }}</td>
        <td class="center-align">{{ item.prix | number }} Ar</td>
        <td class="center-align">
          <p-button
            icon="pi pi-trash"
            severity="danger"
            [style]="{
              'background-color': 'transparent',
              color: 'red',
              'border-color': 'red'
            }"
          />
          <p-button
            icon="pi pi-pencil"
            severity="warn"
            [style]="{
              'background-color': 'transparent',
              color: 'orange',
              'border-color': 'orange',
              'margin-left': '10px'
            }"
          />
        </td>
      </tr>
    </ng-template>
  </p-table>
  <p-dialog
    header="Nouvelle prestation"
    [modal]="true"
    [(visible)]="visible"
    [style]="{ width: '25rem' }"
  >
    <form [formGroup]="formPrestation" (ngSubmit)="onSubmit()">
      <div class="p-field">
        <p>
          <input
            id="intitule"
            type="text"
            pInputText
            formControlName="intitule"
            class="p-inputtext p-component"
            placeholder="Entrez l'intitulé du prestation"
          />
        </p>
        <p>
          <input
            id="prix"
            type="number"
            pInputText
            formControlName="prix"
            class="p-inputtext p-component"
            placeholder="Entrez le prix de la prestation"
          />
        </p>
        <div
          *ngIf="
            (formPrestation.get('intitule')?.invalid &&
              formPrestation.get('intitule')?.touched) ||
            formPrestation.get('prix')?.invalid
          "
        >
          <p-message severity="error">Intitulé du prestation requis.</p-message>
        </div>
      </div>
      <div class="flex justify-end gap-2">
        <p-button
          label="Annuler"
          severity="secondary"
          (click)="visible = false"
        />
        <p-button
          label="Ajouter"
          type="submit"
          severity="warn"
          [disabled]="formPrestation.invalid"
        />
      </div>
    </form>
  </p-dialog>
</div>
